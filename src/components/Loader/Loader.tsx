'use client'

import "@/styles/Loader.scss";


import {useEffect, useState} from "react";
import Link from "next/link";

function Loader() {

    const [animationTiming, setAnimationTiming] = useState<boolean>(false);
    const [loadingAnimation, setLoadingAnimation] = useState<boolean>(false);

    const LoadingScreen = () => {

        return (
            <div className={`LoadingContainer firstImpression stroke-path ${animationTiming ? "fill-shape" : ""}`}>
                <svg
                    version="1.1"
                    id="Layer_1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlnsXlink="http://www.w3.org/1999/xlink"
                    x="0px"
                    y="0px"
                    width="100%"
                    viewBox="0 0 720 1024"
                    enableBackground="new 0 0 720 1024"
                    xmlSpace="preserve"
                >
                    <path
                        d="
M328.132629,559.063293
	C327.056366,561.557373 327.271393,564.625671 323.688843,564.619446
	C320.162872,564.613281 320.134247,561.729309 319.356628,559.467041
	C318.575562,557.194885 317.849335,554.903931 316.781982,552.682861
	C316.594574,555.509766 317.442352,558.251892 316.981262,561.041199
	C316.695709,562.768738 316.439453,564.397217 314.183990,564.450256
	C311.776337,564.506836 311.622772,562.833862 311.621613,561.074585
	C311.618225,555.923889 311.629547,550.773254 311.634613,545.622559
	C311.636566,543.633362 312.014618,541.959717 314.508514,541.821655
	C316.762695,541.696838 318.949432,541.707275 319.772644,544.387817
	C320.986237,548.339417 322.125061,552.314026 323.530029,557.072449
	C325.694305,553.043579 326.220642,549.299194 327.118530,545.728699
	C327.932068,542.493530 329.760498,541.476624 332.892609,541.777954
	C336.322510,542.107971 336.094055,544.588501 336.121246,546.900330
	C336.174042,551.385742 336.155853,555.872498 336.116608,560.358215
	C336.098724,562.401672 336.067535,564.565063 333.154175,564.546143
	C330.395782,564.528198 330.642242,562.383423 330.584595,560.601868
	C330.504333,558.122314 330.564392,555.638184 330.564392,551.809509
	C329.530334,554.902588 328.894623,556.804077 328.132629,559.063293
z"
                    />
                    <path
                        d="
M340.602356,396.949341
	C340.596924,393.986450 340.568787,391.491028 340.595428,388.996185
	C340.616425,387.029602 340.230652,384.850494 343.319702,384.711304
	C345.985687,384.591187 348.296173,384.713104 349.136139,387.927612
	C350.134369,391.747864 351.303009,395.523651 352.573914,399.929230
	C354.678131,395.952484 355.154572,392.153809 356.104462,388.537018
	C356.960815,385.276550 358.914734,384.431427 361.994965,384.706024
	C365.484589,385.017029 365.160339,387.514252 365.179779,389.818207
	C365.217682,394.309052 365.210632,398.801056 365.148804,403.291565
	C365.123138,405.158813 364.999634,407.153564 362.398041,407.184418
	C359.719696,407.216217 359.745819,405.182220 359.707947,403.327332
	C359.660400,401.002655 359.696503,398.676270 359.045990,396.157135
	C358.136627,398.965607 357.187622,401.762085 356.332062,404.586884
	C355.777313,406.418671 354.710602,407.326385 352.726166,407.330994
	C350.736084,407.335663 349.632690,406.367493 349.067169,404.600159
	C348.208221,401.916077 347.375824,399.223511 345.910431,396.496216
	C345.910431,398.991516 345.954437,401.487823 345.895691,403.981750
	C345.853271,405.782837 345.384918,407.267487 343.089569,407.269714
	C340.660706,407.272064 340.529602,405.702240 340.562408,403.904144
	C340.601807,401.742279 340.591888,399.579468 340.602356,396.949341
z"
                    />
                    <path
                        d="
M373.249237,563.153198
	C372.999420,557.271790 372.880402,551.783142 372.861145,546.294189
	C372.854828,544.491272 372.729065,542.426514 375.181763,541.938904
	C377.444458,541.489075 379.485474,541.769836 380.755188,544.093262
	C382.793274,547.822693 384.890259,551.519897 387.749847,555.003601
	C387.749847,551.727478 387.731476,548.451294 387.756927,545.175354
	C387.771484,543.300415 388.378967,541.858337 390.612579,541.958252
	C392.512451,542.043335 393.189789,543.315186 393.201385,544.984985
	C393.239502,550.478516 393.217102,555.972534 393.220032,561.466370
	C393.220917,563.177490 392.538910,564.340210 390.729492,564.628723
	C388.422699,564.996521 386.385834,564.659668 385.143097,562.404907
	C383.147522,558.784363 381.181763,555.147278 378.312866,551.584839
	C378.312866,554.647400 378.312408,557.710022 378.312988,560.772583
	C378.313690,564.577942 376.855774,565.807739 373.249237,563.153198
z"
                    />
                    <path
                        d="
M412.229187,478.404114
	C411.505524,481.341858 414.083344,485.962250 409.441986,485.907410
	C404.918274,485.853912 407.081177,481.305328 406.810791,478.718262
	C406.449951,475.265808 406.670044,471.745850 406.747040,468.257263
	C406.785645,466.508545 406.373962,464.376831 408.898743,463.854736
	C411.355804,463.346649 413.492218,463.696960 414.830353,466.228363
	C416.766541,469.891083 418.814453,473.494720 421.669312,477.098480
	C421.669312,473.942474 421.634369,470.785889 421.682587,467.630615
	C421.710876,465.780579 421.690796,463.743195 424.391235,463.822388
	C426.971497,463.898071 427.105347,465.893677 427.128754,467.749634
	C427.187531,472.402466 427.185974,477.057159 427.120483,481.709869
	C427.092926,483.668793 427.293579,485.904053 424.447906,486.245605
	C421.969696,486.543030 419.890747,486.118896 418.603790,483.578491
	C416.897827,480.211060 414.994171,476.943787 413.051697,473.408142
	C411.724548,475.069550 412.472046,476.602203 412.229187,478.404114
z"
                    />
                    <path
                        d="
M338.367554,622.532227
	C342.447876,627.094543 343.173553,631.966492 340.849396,637.095764
	C339.085785,640.987976 335.903351,643.133301 331.472351,643.358948
	C326.490784,643.612793 322.740906,641.785461 320.538879,637.243835
	C318.532318,633.105408 319.354095,626.213867 322.289215,623.176636
	C325.908966,619.430847 330.323944,618.871277 335.087189,620.546143
	C336.154541,620.921509 337.086304,621.682495 338.367554,622.532227
M325.224884,631.569946
	C325.220123,635.422424 326.133545,638.726990 330.804291,638.781860
	C335.077881,638.832092 335.862610,635.623901 335.954681,632.270935
	C336.053070,628.687927 335.921844,624.831665 331.171692,624.381592
	C326.810883,623.968384 325.595276,627.114380 325.224884,631.569946
z"
                    />
                    <path
                        d="
M294.855927,619.934204
	C297.427368,620.277527 299.630219,620.363647 301.648285,621.018799
	C304.794434,622.040283 306.659302,624.997864 305.260895,627.630981
	C302.926422,632.026672 304.543243,635.857544 305.268616,639.946716
	C305.406464,640.723938 305.288361,641.546448 305.288361,642.609314
	C302.489410,643.519958 300.662384,642.959961 299.846008,640.097717
	C299.528229,638.983521 299.317810,637.835266 298.946259,636.740601
	C298.408142,635.155334 297.283813,634.307922 295.553619,634.394958
	C293.452423,634.500671 293.460571,636.033386 293.279480,637.576233
	C293.033234,639.673462 294.187927,642.963989 290.566803,642.869446
	C286.744232,642.769653 287.897766,639.347534 287.788452,637.084229
	C287.620514,633.606018 287.726257,630.114136 287.735077,626.628052
	C287.751587,620.109253 287.757294,620.109253 294.855927,619.934204
M296.997559,624.674744
	C295.187561,624.372925 293.619934,624.528198 293.402985,626.826965
	C293.289673,628.027466 293.440948,629.270081 294.884155,629.551514
	C296.503296,629.867188 298.322235,630.130554 299.292480,628.351685
	C300.211182,626.667297 299.255676,625.563904 296.997559,624.674744
z"
                    />
                    <path
                        d="
M417.723297,397.849426
	C418.704987,400.881195 419.666199,403.546722 419.355774,406.654083
	C416.289062,408.029449 414.363190,407.283478 413.770172,403.746124
	C413.633575,402.931427 413.513763,402.097229 413.235840,401.326233
	C412.580811,399.509125 411.118347,398.784821 409.307190,398.933929
	C407.155945,399.111023 407.508850,400.885620 407.317810,402.331177
	C407.062164,404.265472 408.189087,407.211517 404.713196,407.157135
	C401.103607,407.100708 401.927551,404.050659 401.864594,401.908569
	C401.737854,397.594849 401.821045,393.274353 401.851471,388.956909
	C401.860809,387.633270 401.829895,386.230377 403.008026,385.296600
	C405.605469,383.238037 417.044556,385.098083 418.905090,387.759003
	C421.490540,391.456696 418.206390,394.282562 417.723297,397.849426
M408.341736,389.650787
	C406.836914,391.806000 406.567474,393.793701 409.704376,394.403137
	C411.298889,394.712921 413.413971,394.197205 413.554504,392.183136
	C413.785767,388.868256 411.167419,389.315613 408.341736,389.650787
z"
                    />
                    <path
                        d="
M308.567810,395.664490
	C309.744873,392.501953 310.605743,389.620117 311.880463,386.934784
	C313.246429,384.057281 317.876465,383.602234 319.112000,386.348602
	C322.009552,392.789368 324.343445,399.473602 326.173584,406.255157
	C323.108002,407.964539 321.148224,407.497375 320.182434,404.669159
	C319.393738,402.359528 318.190948,401.093903 315.543518,401.110809
	C312.863037,401.127930 311.776978,402.552246 310.960938,404.788940
	C309.912842,407.661713 307.840363,407.754028 305.279724,406.571411
	C305.457916,402.669983 307.451324,399.496338 308.567810,395.664490
z"
                    />
                    <path
                        d="
M287.733826,463.743896
	C291.389709,465.535919 291.237732,469.081482 292.351685,471.897278
	C294.095886,476.306244 296.094696,480.674713 296.627441,485.502747
	C293.516846,487.042084 291.657715,486.109314 290.710083,483.152313
	C290.012054,480.974457 288.659180,479.933624 286.303955,479.970459
	C283.990082,480.006683 282.628754,480.981171 281.901917,483.180450
	C280.942017,486.084839 279.127014,487.141083 275.880920,485.185120
	C277.575378,478.485840 280.176758,472.073792 282.691406,465.636719
	C283.541809,463.459717 285.474365,463.617371 287.733826,463.743896
z"
                    />
                    <path
                        d="
M377.326019,468.371094
	C378.280396,465.534973 379.215454,463.441620 382.527618,463.610840
	C385.646790,463.770203 386.213409,466.067261 386.967316,468.197540
	C388.983948,473.895844 390.872223,479.639648 392.804657,485.345245
	C389.107391,487.053772 387.296539,486.027985 386.383698,483.092590
	C385.704254,480.907623 384.363708,479.911682 381.984833,479.950897
	C379.631317,479.989685 378.251678,480.988403 377.601837,483.165527
	C376.952759,485.340210 375.663177,486.895996 373.271057,485.984894
	C370.662537,484.991394 372.132324,482.943146 372.662201,481.369598
	C374.088837,477.132721 375.657654,472.943695 377.326019,468.371094
z"
                    />
                    <path
                        d="
M316.953430,481.772400
	C319.010040,482.755737 320.698975,482.698029 321.355316,480.687622
	C321.957672,478.842712 320.317963,478.110474 318.935333,477.483276
	C318.334473,477.210724 317.668091,477.084991 317.036316,476.877838
	C313.086212,475.582977 309.962219,473.565155 310.781921,468.712097
	C311.509216,464.406128 315.001404,463.210449 318.560333,463.069366
	C322.970093,462.894562 326.150513,464.964050 326.959167,469.930725
	C324.694794,471.618408 322.977997,471.099548 321.339386,469.160828
	C320.351501,467.992096 319.151733,466.925751 317.491333,467.931946
	C317.009888,468.223663 316.525757,468.998932 316.542755,469.536804
	C316.601807,471.406921 318.265808,471.778717 319.603912,472.369263
	C320.203064,472.633636 320.897430,472.672424 321.526672,472.880066
	C325.169647,474.081940 327.765442,476.144867 327.302765,480.439240
	C326.839996,484.734131 323.711304,486.292236 320.037506,486.681427
	C316.015594,487.107513 312.420166,486.015503 310.348328,482.064941
	C309.945190,481.296326 309.787659,480.425751 310.350220,479.711761
	C311.038879,478.837708 312.089355,478.807739 313.099701,478.967590
	C314.722900,479.224457 315.437347,480.752319 316.953430,481.772400
z"
                    />
                    <path
                        d="
M394.972321,624.591125
	C391.673645,627.880371 393.156952,629.015564 396.767181,629.591797
	C398.912048,629.934082 402.733154,627.845093 402.826813,631.592712
	C402.917755,635.233521 399.069611,633.583313 396.882294,633.966003
	C395.210846,634.258362 393.293274,634.179199 393.418549,636.543457
	C393.547852,638.983215 395.630005,638.387268 397.188599,638.713074
	C399.515808,639.199524 403.737122,637.087036 403.743469,640.766663
	C403.750580,644.903137 399.345825,643.052246 396.918793,643.099426
	C386.673004,643.298584 387.727966,643.742249 387.667847,634.123779
	C387.647064,630.799194 387.644318,627.473877 387.694275,624.149780
	C387.716339,622.683044 387.508911,620.811523 389.371063,620.410400
	C393.623413,619.494385 397.949036,619.718262 402.235260,620.305359
	C403.334656,620.455933 403.908508,621.400818 403.827118,622.507690
	C403.740082,623.691040 402.866547,624.211975 401.782532,624.276489
	C399.626740,624.404846 397.466431,624.457458 394.972321,624.591125
z"
                    />
                    <path
                        d="
M272.116028,622.876953
	C275.019592,630.003174 273.137360,633.627869 265.910339,634.714355
	C262.749054,635.189697 260.981812,636.107178 261.340179,639.612183
	C261.523315,641.403198 260.981934,643.044006 258.689880,642.915161
	C256.508911,642.792542 256.072723,641.088623 256.050323,639.361755
	C255.983658,634.225891 255.990891,629.088196 256.041534,623.952026
	C256.061096,621.965271 256.751190,620.256226 259.068054,620.124878
	C263.522705,619.872375 268.068787,619.320068 272.116028,622.876953
M265.519836,629.880798
	C267.379974,629.228027 268.296112,627.906250 267.284119,626.141357
	C266.401886,624.602722 264.629730,624.262695 262.963074,624.723999
	C261.399231,625.156738 261.374756,626.599854 261.419952,627.932800
	C261.501556,630.339355 263.082855,630.351868 265.519836,629.880798
z"
                    />
                    <path
                        d="
M438.335754,626.852051
	C436.112579,629.539673 434.356262,628.606384 432.675964,626.472900
	C430.542267,623.763611 427.983185,623.346252 425.412933,625.709351
	C422.768646,628.140503 422.678040,634.666748 425.253296,637.252075
	C427.748596,639.757141 430.382446,639.374023 432.514557,636.710510
	C433.963562,634.900391 435.822144,633.746399 437.511200,635.404663
	C439.334930,637.195251 437.524323,639.092957 436.193970,640.529053
	C433.371033,643.576355 427.639496,644.358826 423.675781,642.374939
	C419.333160,640.201538 416.878113,634.492310 417.978821,629.126953
	C419.075684,623.780212 423.081543,620.096680 428.187225,619.739868
	C433.260254,619.385315 436.413757,621.489197 438.335754,626.852051
z"
                    />
                    <path
                        d="
M467.561462,619.929565
	C469.671967,620.120789 471.631165,620.147217 471.638916,622.415527
	C471.646240,624.562622 469.732544,624.433716 468.302673,624.387817
	C465.162201,624.287231 464.303162,625.972351 464.376373,628.755127
	C464.463562,632.068970 464.420929,635.387939 464.361908,638.703369
	C464.326874,640.670776 464.557556,643.089600 461.588013,642.958862
	C458.785187,642.835388 458.916412,640.478638 458.882050,638.490295
	C458.827637,635.340637 458.765320,632.185669 458.886841,629.039917
	C458.999878,626.114990 458.328491,624.149414 454.837952,624.349609
	C453.498047,624.426453 452.016296,624.149231 452.017242,622.326294
	C452.018311,620.268127 453.673126,620.023743 455.176392,619.988281
	C459.153809,619.894470 463.134308,619.930542 467.561462,619.929565
z"
                    />
                    <path
                        d="
M357.858765,641.213196
	C357.081421,640.060120 356.440552,639.249512 356.140289,638.327881
	C355.677582,636.907715 355.249756,635.241638 357.024231,634.415344
	C358.803650,633.586731 360.317291,634.215088 361.045898,636.082397
	C361.719818,637.809509 362.644806,639.115479 364.695374,638.517517
	C366.743622,637.920288 366.656891,636.080078 366.675049,634.416809
	C366.709442,631.265808 366.651245,628.113281 366.721588,624.963440
	C366.768158,622.878784 366.291992,620.156677 369.575195,620.272644
	C372.811981,620.386902 372.159637,623.144165 372.224792,625.188538
	C372.314575,628.005249 372.299896,630.828003 372.240448,633.646301
	C372.052856,642.538757 366.062012,645.868225 357.858765,641.213196
z"
                    />
                    <path
                        d="
M355.689789,481.752411
	C357.840668,481.956665 359.051666,482.657288 358.657013,484.622314
	C358.369965,486.051392 357.124176,486.188873 355.932220,486.274170
	C355.601196,486.297852 355.268311,486.311005 354.936554,486.307373
	C339.838196,486.141754 342.179688,488.231628 341.945312,473.960175
	C341.907135,471.636902 341.917664,469.308014 342.037109,466.988464
	C342.129456,465.194366 342.714264,463.704041 344.985779,463.842834
	C347.035309,463.968140 347.305603,465.412994 347.337128,466.990265
	C347.383606,469.314423 347.371063,471.639893 347.370239,473.964813
	C347.367523,481.659088 347.365204,481.659088 355.689789,481.752411
z"
                    />
                    <path
                        d="
M413.596069,542.715393
	C414.867889,549.160645 414.151093,555.302795 414.319366,561.424194
	C414.363861,563.043091 413.990570,564.453735 411.985809,564.564514
	C409.857941,564.682007 408.948761,563.442200 408.931641,561.511719
	C408.883148,556.036804 408.823700,550.559448 408.942017,545.086731
	C409.003723,542.233398 410.597198,541.275513 413.596069,542.715393
z"
                    />
                    <path
                        d="
M353.326630,564.209229
	C350.369354,557.365417 352.046021,550.452271 352.029175,543.627258
	C352.025848,542.278992 353.386871,541.880859 354.655792,541.964417
	C356.246094,542.069092 357.096863,543.047485 357.114624,544.548035
	C357.183075,550.341309 357.209747,556.135986 357.157837,561.929321
	C357.137878,564.160706 355.636566,564.627502 353.326630,564.209229
z"
                    />
                    <path
                        d="
M442.722229,468.214752
	C442.841705,465.911194 442.709625,463.871857 445.383423,463.833923
	C447.970795,463.797180 448.214294,465.669922 448.224457,467.597107
	C448.250671,472.576111 448.243988,477.555420 448.226654,482.534515
	C448.219818,484.503204 447.907837,486.277740 445.293030,486.152039
	C442.979675,486.040863 442.769165,484.365479 442.754791,482.630737
	C442.716248,477.983734 442.725494,473.336365 442.722229,468.214752
z"
                    />
                    <path
                        d="
M382.108154,406.950287
	C379.631256,400.302643 381.003784,393.674316 380.850586,387.115997
	C380.813416,385.523621 381.970856,384.822235 383.530090,384.862518
	C385.127411,384.903809 386.058899,385.786987 386.073517,387.320709
	C386.128693,393.125946 386.159760,398.933411 386.047546,404.737122
	C386.005768,406.896332 384.455597,407.424805 382.108154,406.950287
z"
                    />
                </svg>
            </div>
        );
    };

    const [user, setUser] = useState(null);

    useEffect(() => {
        const hasVisited: boolean = sessionStorage.getItem("visited") == "true";

        if (hasVisited) {
            setLoadingAnimation(false);
        } else {
            setLoadingAnimation(true);
            setTimeout(() => {
                setAnimationTiming(true);

            }, 1600);
            setTimeout(() => {
                setLoadingAnimation(false);
                sessionStorage.setItem("visited", "true");
            }, 4000);
        }

        const storedUser = localStorage.getItem("user");
        if (storedUser) {
            setUser(JSON.parse(storedUser));
        }

    }, []);

    return (
        <>
            {
                loadingAnimation ?
                    <LoadingScreen/>
                    :
                    <div className="contentContainer">
                        <div className="wrapper">
                            <h2>Welcome to our the mini app </h2>
                            <div className="linkContainer">
                                <Link href={user ? "/dashboard" : "/login"}>
                                    {user ? "Dashboard" : "Login"}
                                </Link>
                            </div>
                        </div>
                    </div>
            }
        </>
    );
}

export default Loader;